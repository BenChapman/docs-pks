---
title: Installing and Configuring PKS
owner: PKS
---

<p class="note"><strong>Note</strong>: The PKS documentation is still under development. This topic will continue to be updated and expanded to reflect the most current information.</p>

This topic describes how to install and configure Pivotal Container Service (PKS).

##<a id='resources'></a> Resource Requirements

Installing PKS deploys the following two virtual machines (VMs):

<table>
<tr>
<th>VM</th>
<th>CPU</th>
<th>RAM</th>
<th>Ephemeral Disk</th>
<th>Persistent Disk</th>
</tr>
<tr>
<td>Separate BOSH Director</td>
<td>2</td>
<td>4 GB</td>
<td>20 GB</td>
<td>32 GB</td>
</tr>
<tr>
<td>On-Demand Broker</td>
<td>1</td>
<td>4 GB</td>
<td>20 GB</td>
<td>n/a</td>
</tr>
</table>

Each Kubernetes cluster provisioned through PKS deploys the following VMs:

<table>
<tr>
<th>Number</th>
<th>VM</th>
<th>CPU</th>
<th>RAM</th>
<th>Ephemeral Disk</th>
<th>Persistent Disk</th>
</tr>
<td>3</td>
<td>etcd</td>
<td>1</td>
<td>4 GB</td>
<td>20 GB</td>
<td>5 GB</td>
</tr>
<tr>
<td>2</td>
<td>master</td>
<td>1</td>
<td>4 GB</td>
<td>20 GB</td>
<td>n/a</td>
</tr>
<tr>
<td>3</td>
<td>worker</td>
<td>4</td>
<td>8 GB</td>
<td>100 GB</td>
<td>10 GB</td>
</tr>
</table>

##<a id='install'></a> Step 1: Install PKS

Perform the following steps to install PKS:

1. Download the product file from [Pivotal Network](https://network.pivotal.io).
1. Navigate to `YOUR-OPSMAN-FQDN` in a browser to log in to the Ops Manager Installation Dashboard.
1. From the Ops Manager Installation Dashboard, click **Import a Product** to upload the product file.
1. Under **Pivotal Container Service** in the left column, click the plus sign to add this product to your staging area.

##<a id='configure'></a> Step 2: Configure PKS

Click the orange **Pivotal Container Service** tile to start the configuration process.

###<a id='azs-networks'></a> Assign AZs and Networks

Perform the following steps:

1. Click **Assign AZs and Networks**.
1. Select an availability zone for your singleton jobs, and one or more availability zones to balance other jobs in. This is where PCF creates the PKS broker.
1. Under **Network**, select a subnet for the PKS broker. 
1. Under **Service Network**, select a subnet for the on-demand service instances created by the PKS broker.
1. Click **Save**.

###<a id='pks-api'></a> PKS API

Perform the following steps:

1. Click **PKS API**.
1. Under **Default Cluster Authorization Mode**, select an authentication mode for the Kubernetes clusters.
1. Under **Certificate**, you can provide your own certificate of ask OpsManager to generate one.
1. Under **Generate RSA Certificate**, provide the domain names that you wish your certificate to have. The domain names should contain 
the hostname you intend to use for accessing the PKS API service. 
1. Click **Save**.

###<a id='broker'></a> Broker

Perform the following steps:

1. Click **Broker**.
1. Under **Routing mode**, select a routing mode for the PKS broker.
1. Under **AZ placement**, select an availability zone for the PKS broker.
1. Under **ETCD VM Type**, select the type of VM to use for the Kubernetes etcd nodes. (This is temporary until master and etcd nodes are merged)
1. Click **Save**.

###<a id='plan'></a> Plan

Perform the following steps:

1. Click **Plan**
1. Under **Plan description**, change the description if you wish.
1. Under **Master VM Type**, select the type of VM to use for Kubernetes master nodes.
1. Under **Worker VM Type**, select the type of VM to use for Kubernetes worker nodes.
1. Under **Worker Persistent Disk Type**, select the size of the persistent disk for the Kubernetes worker nodes.
1. Under **Worker Instances**, select the default number of Kubernetes worker nodes to provision for each cluster.
1. Click **Save**.

###<a id='iaas'></a> IaaS

Perform the following steps:

1. Click **IaaS**.
1. Under **Choose your IaaS**, select your IaaS.
1. Perform the steps specific to your IaaS.
	* For vSphere, ensure the values match those in the **vCenter Config** section of the **Ops Manager** tile:
		1. Enter your **vCenter Host**, such as `vcenter.cf-example.com`.
		1. Enter your **Datacenter Name**, such as `cf-example-dc`.
		1. For **VM Folder**, enter the name of a VM and Template Folder in vCenter.
1. Click **Save**.

###<a id='resources'></a> (Optional) Resource Config

To modify the resource usage of PKS, click **Resource Config** and edit the **PKS on-demand broker** job.

###<a id='stemcell'></a> (Optional) Stemcell

To edit the stemcell configuration, click **Stemcell**. Click **Import Stemcell** to import a new stemcell. 

##<a id='apply-changes'></a> Step 3: Apply Changes

After configuring the tile, return to the Ops Manager Installation Dashboard and click **Apply Changes** to deploy the tile.

After the deployment finishes, click the tile and navigate to the **Status** tab to retrieve the IP address for the PKS API endpoint. 
This is the endpoint that developers use to create and manage clusters. See [Using PKS](using.html) for more information.

